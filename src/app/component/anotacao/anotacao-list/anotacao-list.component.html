
<div class="anotacoes-container">
  
  <div class="new-anotacao-form">
    <form [formGroup]="newAnotacaoForm" (ngSubmit)="createAnotacao()">
      <textarea 
        formControlName="conteudo" 
        placeholder="Adicionar uma anotaÃ§Ã£o..."
        rows="3">
      </textarea>
      <button type="submit" [disabled]="newAnotacaoForm.invalid">Salvar</button>
    </form>
  </div>

  <div *ngIf="isLoading" class="loading">
    <p>Carregando anotaÃ§Ãµes...</p>
  </div>

  <div *ngIf="!isLoading && anotacoes.length > 0" class="anotacoes-list">
    <div *ngFor="let anotacao of anotacoes" class="anotacao-card">
      
      <div *ngIf="editingAnotacaoId === anotacao.id; else displayMode">
        <form [formGroup]="editAnotacaoForm" (ngSubmit)="saveEdit(anotacao)" class="edit-form">
          <textarea formControlName="conteudo" rows="4"></textarea>
          <div class="edit-actions">
            <button type="button" (click)="cancelEdit()">Cancelar</button>
            <button type="submit" [disabled]="editAnotacaoForm.invalid">Salvar</button>
          </div>
        </form>
      </div>

      <ng-template #displayMode>
        <p class="anotacao-conteudo">{{ anotacao.conteudo }}</p>
        <div class="anotacao-actions">
          <span class="icon-button" title="Exportar como .txt" (click)="exportarAnotacao(anotacao)">â†“</span>
          <span class="icon-button" title="Editar" (click)="startEdit(anotacao)">âœï¸</span>
          <span class="icon-button" title="Excluir" (click)="deleteAnotacao(anotacao.id!)">ğŸ—‘ï¸</span>
        </div>
      </ng-template>

    </div>
  </div>

  <div *ngIf="!isLoading && anotacoes.length === 0" class="no-data">
    <p>Nenhuma anotaÃ§Ã£o para esta atividade ainda.</p>
  </div>

</div>