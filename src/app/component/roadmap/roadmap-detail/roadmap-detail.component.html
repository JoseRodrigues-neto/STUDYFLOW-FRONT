<div class="page-container">

  <header class="page-header" *ngIf="!isLoadingRoadmap && roadmap">
    <h1>{{ roadmap.titulo }}</h1>
    <p>{{ roadmap.descricao }}</p>
  </header>

  <section class="atividades-section">

    <div class="atividades-header">
      <div class="header-left">
        <h2>Atividades</h2>
      </div>
      <div class="header-right">
        <button class="btn-adicionar" (click)="adicionarAtividade()">
          <span>Nova Atividade</span>
          <span class="icon-add">+</span>
        </button>
      </div>
    </div>

    <div class="atividades-list" *ngIf="!isLoadingAtividades">

      <div *ngIf="atividades.length > 0; else noAtividades">

        <div *ngFor="let atividade of atividades" class="task-item"
          [ngClass]="getStatusClass(atividade.status)" (click)="verDetalhesAtividade(atividade)">

          <div class="task-content">
            <h3>{{ atividade.titulo }}</h3>

            <p *ngIf="atividade.descricao">{{ atividade.descricao | slice:0:100 }}{{ atividade.descricao.length > 100 ?
              '...' : '' }}</p>
          </div>

          <div class="task-actions">
            <span class="icon-btn edit-icon" title="Editar"
              (click)="editarAtividade(atividade); $event.stopPropagation()">
              âœï¸
            </span>
            <span class="icon-btn delete-icon" title="Excluir"
              (click)="excluirAtividade(atividade); $event.stopPropagation()">
              ğŸ—‘ï¸
            </span>
          </div>

        </div>
      </div>

      <ng-template #noAtividades>
        <div class="empty-state">
          <p>Nenhuma atividade encontrada para este roadmap.</p>
          <button class="btn-secundario" (click)="adicionarAtividade()">Criar a primeira atividade</button>
        </div>
      </ng-template>

    </div>

  </section>
</div>