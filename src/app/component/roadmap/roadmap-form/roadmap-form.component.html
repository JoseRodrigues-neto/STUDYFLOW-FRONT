<div class="form-container">
  <h2 class="form-title">{{ roadmapId ? 'Editar Roadmap' : 'Novo Roadmap' }}</h2>
  <p class="form-subtitle">Preencha os detalhes do seu plano de estudos.</p>

  <!-- 1. Indicador de Carregamento -->
  <div *ngIf="isLoading" class="loading-indicator">
    <p>Carregando dados...</p>
    <!-- Você pode adicionar um spinner aqui -->
  </div>

  <!-- 2. Mensagem de Erro -->
  <div *ngIf="errorMessage" class="error-message">
    <h4>Ocorreu um Erro</h4>
    <p>{{ errorMessage }}</p>
    <button type="button" class="btn btn-secondary" routerLink="/app/roadmaps">
      Voltar para a Lista
    </button>
  </div>

  <!-- 3. Formulário (só aparece se não estiver carregando e não houver erro) -->
  <form *ngIf="!isLoading && !errorMessage && roadmapForm" [formGroup]="roadmapForm" (ngSubmit)="onSubmit()" novalidate>
    
    <div class="form-group">
      <label for="titulo">Título do Roadmap</label>
      <input 
        type="text" 
        id="titulo" 
        class="form-control" 
        formControlName="titulo"
        placeholder="Ex: Trilha de Estudos para Angular"
        required
        [ngClass]="{ 'is-invalid': roadmapForm.get('titulo')?.invalid && roadmapForm.get('titulo')?.touched }">
      <div *ngIf="roadmapForm.get('titulo')?.invalid && roadmapForm.get('titulo')?.touched" class="invalid-feedback">
        O título é obrigatório.
      </div>
    </div>

    <div class="form-group">
      <label for="descricao">Descrição</label>
      <textarea 
        id="descricao" 
        class="form-control" 
        formControlName="descricao"
        rows="4"
        placeholder="Descreva o objetivo principal deste roadmap..."
        required
        [ngClass]="{ 'is-invalid': roadmapForm.get('descricao')?.invalid && roadmapForm.get('descricao')?.touched }"></textarea>
      <div *ngIf="roadmapForm.get('descricao')?.invalid && roadmapForm.get('descricao')?.touched" class="invalid-feedback">
        A descrição é obrigatória.
      </div>
    </div>

    <div class="form-actions">
      <button 
        type="button" 
        class="btn btn-secondary" 
        routerLink="/app/roadmaps">
        Cancelar
      </button>
      <button 
        type="submit" 
        class="btn btn-primary" 
        [disabled]="roadmapForm.invalid || isLoading || errorMessage">
        <span *ngIf="isLoading">Carregando...</span>
        <span *ngIf="!isLoading">{{ roadmapId ? 'Salvar Alterações' : 'Criar Roadmap' }}</span>
      </button>
    </div>

  </form>
</div>